6)

#include "ns3/core-module.h"
#include "ns3/network-module.h"
#include "ns3/internet-module.h"
#include "ns3/csma-module.h"
#include "ns3/applications-module.h"
#include "ns3/netanim-module.h"
using namespace ns3;

int main(int argc, char *argv[])
{
  CommandLine C;
  C.Parse(argc, argv);

  NodeContainer N;
  N.Create(4);

  CsmaHelper CS;
  CS.SetChannelAttribute("DataRate", StringValue("100Mbps"));
  CS.SetChannelAttribute("Delay", TimeValue(NanoSeconds(6560)));

  NetDeviceContainer D = CS.Install(N);

  InternetStackHelper S;
  S.Install(N);

  Ipv4AddressHelper A;
  A.SetBase("10.1.1.0", "255.255.255.0");
  Ipv4InterfaceContainer I = A.Assign(D);

  uint16_t p = 9;
  UdpEchoServerHelper SV(p);
  ApplicationContainer Sa = SV.Install(N.Get(1));
  Sa.Start(Seconds(1));
  Sa.Stop (Seconds(10));

  UdpEchoClientHelper CL(I.GetAddress(1), p);
  CL.SetAttribute("MaxPackets", UintegerValue(1));
  CL.SetAttribute("Interval",  TimeValue(Seconds(1)));
  CL.SetAttribute("PacketSize", UintegerValue(1024));
  ApplicationContainer Ca = CL.Install(N.Get(0));
  Ca.Start(Seconds(2));
  Ca.Stop (Seconds(10));

  AsciiTraceHelper ascii;
  CS.EnableAsciiAll(ascii.CreateFileStream("csma.tr"));

  AnimationInterface anim("csma.xml");

  Simulator::Run();
  Simulator::Destroy();
  return 0;
}
